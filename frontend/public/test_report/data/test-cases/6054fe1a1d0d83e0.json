{"uid":"6054fe1a1d0d83e0","name":"添加分享","fullName":"InterfaceAutoTestWithPytest.test_case.test_sharing_module.TestSharingModule#test_add_create","historyId":"8d6f2941838fc35663e7e4b55604b6eb","time":{"start":1687275547553,"stop":1687275547654,"duration":101},"description":"通过接口添加分享","descriptionHtml":"<p>通过接口添加分享</p>\n","status":"failed","statusMessage":"AssertionError","statusTrace":"self = <test_case.test_sharing_module.TestSharingModule object at 0x00000215A539C340>\ncase_data = [1.0, '场次ID在数据库中不存在', 'http://127.0.0.1:8002', '/sharings/', 'post', '{     \"user_id\": 1,     \"histrionics_id\": 214424,    \"context\":\" 好\",\"image_url\":\"url\" }', ...]\n\n    @allure.story(\"添加分享功能\")\n    @allure.title('添加分享')  # 指定测试用例标题，默认是函数名\n    @allure.description('通过接口添加分享')  # 添加测试用例描述\n    @allure.severity(allure.severity_level.CRITICAL)  # 阻塞级别\n    @pytest.mark.run(order=1)   # 执行顺序\n    @pytest.mark.parametrize('case_data', add_test_data)\n    def test_add_create(self,case_data):\n        with allure.step(\"读取请求数据，调用接口\"):\n            logging.info(\"接口用例数据：%s\" % case_data)\n            response = api_request(case_data[API_IP], case_data[API_URI], case_data[REQUEST_METHOD],\n                                   case_data[API_REQUEST_DATA], case_data[RESPONSE_EXTRACT_VAR],\n                                   case_data[REQUEST_HEADER], case_data[REQUEST_COOKIE])\n        with allure.step(\"获取响应数据，进行断言\"):\n>           assert_keyword(response, case_data[RESPONSE_ASSERT_KEYWORD])\n\ntest_case\\test_sharing_module.py:27: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nresponse = <Response [200]>, keyword = '\"status\":\"error\"'\n\n    def assert_keyword(response, keyword):\n        keyword_list = keyword.split(\"|\")\n        for keyword in keyword_list:\n            keyword=keyword.replace(\" \",\"\")\n            try:\n>               assert keyword.strip() in response.text\nE               AssertionError\n\nutil\\assert_util.py:11: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"description":"通过接口添加分享","status":"failed","statusMessage":"AssertionError","statusTrace":"self = <test_case.test_sharing_module.TestSharingModule object at 0x00000215A539C340>\ncase_data = [1.0, '场次ID在数据库中不存在', 'http://127.0.0.1:8002', '/sharings/', 'post', '{     \"user_id\": 1,     \"histrionics_id\": 214424,    \"context\":\" 好\",\"image_url\":\"url\" }', ...]\n\n    @allure.story(\"添加分享功能\")\n    @allure.title('添加分享')  # 指定测试用例标题，默认是函数名\n    @allure.description('通过接口添加分享')  # 添加测试用例描述\n    @allure.severity(allure.severity_level.CRITICAL)  # 阻塞级别\n    @pytest.mark.run(order=1)   # 执行顺序\n    @pytest.mark.parametrize('case_data', add_test_data)\n    def test_add_create(self,case_data):\n        with allure.step(\"读取请求数据，调用接口\"):\n            logging.info(\"接口用例数据：%s\" % case_data)\n            response = api_request(case_data[API_IP], case_data[API_URI], case_data[REQUEST_METHOD],\n                                   case_data[API_REQUEST_DATA], case_data[RESPONSE_EXTRACT_VAR],\n                                   case_data[REQUEST_HEADER], case_data[REQUEST_COOKIE])\n        with allure.step(\"获取响应数据，进行断言\"):\n>           assert_keyword(response, case_data[RESPONSE_ASSERT_KEYWORD])\n\ntest_case\\test_sharing_module.py:27: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nresponse = <Response [200]>, keyword = '\"status\":\"error\"'\n\n    def assert_keyword(response, keyword):\n        keyword_list = keyword.split(\"|\")\n        for keyword in keyword_list:\n            keyword=keyword.replace(\" \",\"\")\n            try:\n>               assert keyword.strip() in response.text\nE               AssertionError\n\nutil\\assert_util.py:11: AssertionError","steps":[{"name":"读取请求数据，调用接口","time":{"start":1687275547553,"stop":1687275547651,"duration":98},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false},{"name":"获取响应数据，进行断言","time":{"start":1687275547652,"stop":1687275547654,"duration":2},"status":"failed","statusMessage":"AssertionError\n","statusTrace":"  File \"D:\\repo\\23_Spring_software_testing\\InterfaceAutoTestWithPytest\\test_case\\test_sharing_module.py\", line 27, in test_add_create\n    assert_keyword(response, case_data[RESPONSE_ASSERT_KEYWORD])\n  File \"D:\\repo\\23_Spring_software_testing\\InterfaceAutoTestWithPytest\\util\\assert_util.py\", line 11, in assert_keyword\n    assert keyword.strip() in response.text\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":0,"stepsCount":0,"hasContent":true}],"attachments":[{"uid":"8a2f8d95755368c7","name":"log","source":"8a2f8d95755368c7.txt","type":"text/plain","size":2317}],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":1,"stepsCount":2,"hasContent":true},"afterStages":[],"labels":[{"name":"feature","value":"分享模块"},{"name":"story","value":"添加分享功能"},{"name":"severity","value":"critical"},{"name":"tag","value":"run(order=1)"},{"name":"parentSuite","value":"InterfaceAutoTestWithPytest.test_case"},{"name":"suite","value":"test_sharing_module"},{"name":"subSuite","value":"TestSharingModule"},{"name":"host","value":"LAPTOP-TK5KLJFB"},{"name":"thread","value":"13228-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"InterfaceAutoTestWithPytest.test_case.test_sharing_module"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"case_data","value":"[1.0, '场次ID在数据库中不存在', 'http://127.0.0.1:8002', '/sharings/', 'post', '{     \"user_id\": 1,     \"histrionics_id\": 214424,    \"context\":\" 好\",\"image_url\":\"url\" }', '\"status\":\"error\"', '', \"{\\n   'Accept': '*/*',\\n   'Connection': 'keep-alive',\\n   'Content-type': 'multipart/form-data'\\n}\", '']"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["run(order=1)"]},"source":"6054fe1a1d0d83e0.json","parameterValues":["[1.0, '场次ID在数据库中不存在', 'http://127.0.0.1:8002', '/sharings/', 'post', '{     \"user_id\": 1,     \"histrionics_id\": 214424,    \"context\":\" 好\",\"image_url\":\"url\" }', '\"status\":\"error\"', '', \"{\\n   'Accept': '*/*',\\n   'Connection': 'keep-alive',\\n   'Content-type': 'multipart/form-data'\\n}\", '']"]}